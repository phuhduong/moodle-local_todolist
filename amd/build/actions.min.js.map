{"version":3,"file":"actions.min.js","sources":["../src/actions.js"],"sourcesContent":["/**\n * @module local_todolist/actions\n */\n\ndefine([], function() {\n\n    /**\n     * Initialize the to-do list actions.\n     */\n    function init() {\n        // eslint-disable-next-line consistent-return\n        document.getElementById('addtask')?.addEventListener('click', () => {\n            const name = document.getElementById('newtaskname').value.trim();\n            if (!name) {\n                // eslint-disable-next-line no-alert\n                return alert('Enter task name');\n            }\n\n            fetch('ajax.php?action=add', {\n                method: 'POST',\n                headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n                body: new URLSearchParams({ name })\n            }).then(res => res.json())\n                .then(() => location.reload())\n                // eslint-disable-next-line no-alert\n                .catch(() => alert('Failed to add task'));\n        });\n\n        document.querySelectorAll('.toggle').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const id = btn.closest('li').dataset.id;\n                // eslint-disable-next-line promise/catch-or-return\n                fetch('ajax.php?action=toggle', {\n                    method: 'POST',\n                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n                    body: new URLSearchParams({id})\n                }).then(res => res.json())\n                    .then(() => location.reload());\n            });\n        });\n\n        document.querySelectorAll('.rename').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const li = btn.closest('li');\n                const taskname = li.querySelector('.taskname');\n                const input = li.querySelector('.renameinput');\n\n                if (input.style.display === 'none') {\n                    input.style.display = 'inline';\n                    taskname.style.display = 'none';\n                    input.focus();\n                } else {\n                    const id = li.dataset.id;\n                    const name = input.value.trim();\n                    if (!name) {\n                        return;\n                    }\n\n                    // eslint-disable-next-line promise/catch-or-return\n                    fetch('ajax.php?action=rename', {\n                        method: 'POST',\n                        headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n                        body: new URLSearchParams({id, name})\n                    }).then(res => res.json())\n                        .then(() => location.reload());\n                }\n            });\n        });\n\n        document.querySelectorAll('.delete').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const id = btn.closest('li').dataset.id;\n                // eslint-disable-next-line promise/catch-or-return\n                fetch('ajax.php?action=delete', {\n                    method: 'POST',\n                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},\n                    body: new URLSearchParams({id})\n                }).then(res => res.json())\n                    .then(() => location.reload());\n            });\n        });\n    }\n\n    return {\n        init: init\n    };\n});\n"],"names":["define","init","document","getElementById","addEventListener","name","value","trim","alert","fetch","method","headers","body","URLSearchParams","then","res","json","location","reload","catch","querySelectorAll","forEach","btn","id","closest","dataset","li","taskname","querySelector","input","style","display","focus"],"mappings":"AAIAA,gCAAO,IAAI,iBA+EA,CACHC,wEAzEAC,SAASC,eAAe,mEAAYC,iBAAiB,SAAS,WACpDC,KAAOH,SAASC,eAAe,eAAeG,MAAMC,WACrDF,YAEMG,MAAM,mBAGjBC,MAAM,sBAAuB,CACzBC,OAAQ,OACRC,QAAS,gBAAiB,qCAC1BC,KAAM,IAAIC,gBAAgB,CAAER,KAAAA,SAC7BS,MAAKC,KAAOA,IAAIC,SACdF,MAAK,IAAMG,SAASC,WAEpBC,OAAM,IAAMX,MAAM,2BAG3BN,SAASkB,iBAAiB,WAAWC,SAAQC,MACzCA,IAAIlB,iBAAiB,SAAS,WACpBmB,GAAKD,IAAIE,QAAQ,MAAMC,QAAQF,GAErCd,MAAM,yBAA0B,CAC5BC,OAAQ,OACRC,QAAS,gBAAiB,qCAC1BC,KAAM,IAAIC,gBAAgB,CAACU,GAAAA,OAC5BT,MAAKC,KAAOA,IAAIC,SACdF,MAAK,IAAMG,SAASC,iBAIjChB,SAASkB,iBAAiB,WAAWC,SAAQC,MACzCA,IAAIlB,iBAAiB,SAAS,WACpBsB,GAAKJ,IAAIE,QAAQ,MACjBG,SAAWD,GAAGE,cAAc,aAC5BC,MAAQH,GAAGE,cAAc,mBAEH,SAAxBC,MAAMC,MAAMC,QACZF,MAAMC,MAAMC,QAAU,SACtBJ,SAASG,MAAMC,QAAU,OACzBF,MAAMG,YACH,OACGT,GAAKG,GAAGD,QAAQF,GAChBlB,KAAOwB,MAAMvB,MAAMC,WACpBF,YAKLI,MAAM,yBAA0B,CAC5BC,OAAQ,OACRC,QAAS,gBAAiB,qCAC1BC,KAAM,IAAIC,gBAAgB,CAACU,GAAAA,GAAIlB,KAAAA,SAChCS,MAAKC,KAAOA,IAAIC,SACdF,MAAK,IAAMG,SAASC,kBAKrChB,SAASkB,iBAAiB,WAAWC,SAAQC,MACzCA,IAAIlB,iBAAiB,SAAS,WACpBmB,GAAKD,IAAIE,QAAQ,MAAMC,QAAQF,GAErCd,MAAM,yBAA0B,CAC5BC,OAAQ,OACRC,QAAS,gBAAiB,qCAC1BC,KAAM,IAAIC,gBAAgB,CAACU,GAAAA,OAC5BT,MAAKC,KAAOA,IAAIC,SACdF,MAAK,IAAMG,SAASC"}