{"version":3,"file":"actions.min.js","sources":["../src/actions.js"],"sourcesContent":["/**\n * @module local_todolist/actions\n */\n\ndefine(['core/ajax'], function(Ajax) {\n\n    /**\n     * Initialize the to-do list actions.\n     */\n    function init() {\n        document.getElementById('addtask')?.addEventListener('click', () => {\n            const name = document.getElementById('newtaskname').value.trim();\n            if (!name) {\n                return alert('Enter task name');\n            }\n\n            Ajax.call([{\n                methodname: 'local_todolist_add_task',\n                args: { name: name }\n            }])[0].then(() => {\n                location.reload();\n            }).catch(() => {\n                alert('Failed to add task');\n            });\n        });\n\n        document.querySelectorAll('.toggle').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const id = parseInt(btn.closest('li').dataset.id);\n\n                Ajax.call([{\n                    methodname: 'local_todolist_toggle_task',\n                    args: { id: id }\n                }])[0].then(() => {\n                    location.reload();\n                }).catch(() => {\n                    alert('Failed to toggle task');\n                });\n            });\n        });\n\n        document.querySelectorAll('.rename').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const li = btn.closest('li');\n                const taskname = li.querySelector('.taskname');\n                const input = li.querySelector('.renameinput');\n\n                if (input.style.display === 'none') {\n                    input.style.display = 'inline';\n                    taskname.style.display = 'none';\n                    input.focus();\n                } else {\n                    const id = parseInt(li.dataset.id);\n                    const name = input.value.trim();\n                    if (!name) {\n                        return;\n                    }\n\n                    Ajax.call([{\n                        methodname: 'local_todolist_rename_task',\n                        args: { id: id, name: name }\n                    }])[0].then(() => {\n                        location.reload();\n                    }).catch(() => {\n                        alert('Failed to rename task');\n                    });\n                }\n            });\n        });\n\n        document.querySelectorAll('.delete').forEach(btn => {\n            btn.addEventListener('click', () => {\n                const id = parseInt(btn.closest('li').dataset.id);\n\n                Ajax.call([{\n                    methodname: 'local_todolist_delete_task',\n                    args: { id: id }\n                }])[0].then(() => {\n                    location.reload();\n                }).catch(() => {\n                    alert('Failed to delete task');\n                });\n            });\n        });\n    }\n\n    return {\n        init: init\n    };\n});"],"names":["define","Ajax","init","document","getElementById","addEventListener","name","value","trim","alert","call","methodname","args","then","location","reload","catch","querySelectorAll","forEach","btn","id","parseInt","closest","dataset","li","taskname","querySelector","input","style","display","focus"],"mappings":"AAIAA,gCAAO,CAAC,cAAc,SAASC,YAkFpB,CACHC,wEA7EAC,SAASC,eAAe,mEAAYC,iBAAiB,SAAS,WACpDC,KAAOH,SAASC,eAAe,eAAeG,MAAMC,WACrDF,YACMG,MAAM,mBAGjBR,KAAKS,KAAK,CAAC,CACPC,WAAY,0BACZC,KAAM,CAAEN,KAAMA,SACd,GAAGO,MAAK,KACRC,SAASC,YACVC,OAAM,KACLP,MAAM,4BAIdN,SAASc,iBAAiB,WAAWC,SAAQC,MACzCA,IAAId,iBAAiB,SAAS,WACpBe,GAAKC,SAASF,IAAIG,QAAQ,MAAMC,QAAQH,IAE9CnB,KAAKS,KAAK,CAAC,CACPC,WAAY,6BACZC,KAAM,CAAEQ,GAAIA,OACZ,GAAGP,MAAK,KACRC,SAASC,YACVC,OAAM,KACLP,MAAM,kCAKlBN,SAASc,iBAAiB,WAAWC,SAAQC,MACzCA,IAAId,iBAAiB,SAAS,WACpBmB,GAAKL,IAAIG,QAAQ,MACjBG,SAAWD,GAAGE,cAAc,aAC5BC,MAAQH,GAAGE,cAAc,mBAEH,SAAxBC,MAAMC,MAAMC,QACZF,MAAMC,MAAMC,QAAU,SACtBJ,SAASG,MAAMC,QAAU,OACzBF,MAAMG,YACH,OACGV,GAAKC,SAASG,GAAGD,QAAQH,IACzBd,KAAOqB,MAAMpB,MAAMC,WACpBF,YAILL,KAAKS,KAAK,CAAC,CACPC,WAAY,6BACZC,KAAM,CAAEQ,GAAIA,GAAId,KAAMA,SACtB,GAAGO,MAAK,KACRC,SAASC,YACVC,OAAM,KACLP,MAAM,mCAMtBN,SAASc,iBAAiB,WAAWC,SAAQC,MACzCA,IAAId,iBAAiB,SAAS,WACpBe,GAAKC,SAASF,IAAIG,QAAQ,MAAMC,QAAQH,IAE9CnB,KAAKS,KAAK,CAAC,CACPC,WAAY,6BACZC,KAAM,CAAEQ,GAAIA,OACZ,GAAGP,MAAK,KACRC,SAASC,YACVC,OAAM,KACLP,MAAM"}